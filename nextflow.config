params {
	repsProcessA = 10
	processATimeRange = "1-2"
	filesProcessA = 1
	processATimeBetweenFileCreationInSecs = 0

	processBTimeRange = "2-3"
	processBWriteToDiskMb = 10

	output = "results"
}


withName: processA {
	cpus =  1
	memory = "4.Gb"
}

withName: processB {
	machineType = "n1-standard-1"
}

process {
    maxForks = 25
	executor = 'google-lifesciences'
	container = "ubuntu:18.10"
	errorStrategy = "retry"
	maxRetries = 5
	publishDir = [path: params.output, mode: 'copy', overwrite: 'true']
}

google {
    lifeSciences.bootDiskSize = 100.GB
    lifeSciences.preemptible = true
    zone = 'us-east1-b'
    network = 'jax-poc-lifebit-01-vpc-network'
    subnetwork = 'us-east1-sub2'
}

cloud {
    driver = 'google'
    imageId = 'nextflow-250616/global/images/ubuntu-java-docker'
    instanceType = 'n1-standard-2'
    autoscale {
        enabled = true
        starvingTimeout = "1s"
    }
}
